# main sources:
# http://stevelosh.com/blog/2012/10/the-homely-mutt/
# https://wiki.archlinux.org/index.php/mutt 

## General options
set   header_cache     = "~/.mutt/cache"
set   message_cachedir = "~/.mutt/cache"
unset imap_passive
set   mail_check = 15
set   mbox_type=Maildir
set   index_format="%Z %{%m/%d %H:%M} | %-15.15L | %s"

## customizations

#setup passwords
source ~/.mutt/machine_specific
source ~/.mutt/gpg.rc

# Index Key Bindings ---------------------------------
bind index gg       first-entry
bind index G        last-entry

## Shortcuts
macro index 'c' '<change-folder>?<change-dir><home>^K=<enter>'

#coloring
source ~/.mutt/colors

# copied from : homely mutt
#
## pager options
# Pager View Options ---------------------------------
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs

#using less as the pager
#set   to_chars = " L"
#set   pager = "less -i" 
#unset prompt_after

## index options
set sort = threads                         # like gmail
set sort_aux = reverse-last-date-received  # like gmail
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"

# View attachments properly.
bind attach <return> view-mailcap

# viewing html 
set wait_key=no
set mailcap_path 	= ~/.mutt/mailcap
auto_view text/html
macro pager \Cu "|urlview<enter>" "call urlview to open links"
#alternative_order text/plain text/html
macro attach 'V' "<pipe-entry>cat >~/.tmp/mutt_attach/mail.html && firefox ~/.tmp/mutt_attach/mail.html && rm ~/.tmp/mutt_attach/mail.html<enter>"

ignore *                               # first, ignore all headers
unignore from: to: cc: date: subject:  # then, show only these
hdr_order from: to: cc: date: subject: # and in this order

# contact management
set query_command= "abook --mutt-query '%s'"
macro index,pager  a "<pipe-message>abook --add-email-quiet<return>" "Add this sender to Abook"
bind editor        <Tab> complete-query
